

<!DOCTYPE html>
<html>
<head>
<style type="text/css">.knitr.inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
},
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0em 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage.left {
  text-align: left;
}
.rimage.right {
  text-align: right;
}
.rimage.center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}</style>
  <title>A Report Generated by knitr</title>
</head>
<body>

  <p>This report is automatically generated with the R
    package <a href="http://yihui.name/knitr"><strong>knitr</strong></a>
    (version <code class="knitr inline">1.4.1</code>)
    .</p>

<div class="chunk" id="auto-report"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl std">(ggplot2)</span>
</pre></div>
<div class="message"><pre class="knitr r">## Loading required package: methods
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">library</span><span class="hl std">(plyr)</span>
<span class="hl std">gDat</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">read.delim</span><span class="hl std">(</span><span class="hl str">&quot;Data/gapminderDataFiveYear.txt&quot;</span><span class="hl std">)</span>
<span class="hl com"># Check that data import went successfully</span>
<span class="hl kwd">tail</span><span class="hl std">(gDat)</span>
</pre></div>
<div class="output"><pre class="knitr r">##       country year      pop continent lifeExp gdpPercap
## 1699 Zimbabwe 1982  7636524    Africa   60.36     788.9
## 1700 Zimbabwe 1987  9216418    Africa   62.35     706.2
## 1701 Zimbabwe 1992 10704340    Africa   60.38     693.4
## 1702 Zimbabwe 1997 11404948    Africa   46.81     792.4
## 1703 Zimbabwe 2002 11926563    Africa   39.99     672.0
## 1704 Zimbabwe 2007 12311143    Africa   43.49     469.7
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Informative plot: life expectancy vs. GDP per capita for a particular year</span>
<span class="hl std">q1</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ggplot</span><span class="hl std">(gDat,</span> <span class="hl kwd">aes</span><span class="hl std">(</span><span class="hl kwc">x</span> <span class="hl std">= gdpPercap,</span> <span class="hl kwc">y</span> <span class="hl std">= lifeExp))</span> <span class="hl opt">+</span> <span class="hl kwd">geom_point</span><span class="hl std">()</span> <span class="hl opt">+</span> <span class="hl kwd">scale_x_log10</span><span class="hl std">()</span> <span class="hl opt">+</span> <span class="hl kwd">facet_wrap</span><span class="hl std">(</span><span class="hl opt">~</span><span class="hl std">continent)</span> <span class="hl opt">+</span>
    <span class="hl kwd">geom_smooth</span><span class="hl std">(</span><span class="hl kwc">method</span> <span class="hl std">= loess)</span> <span class="hl opt">+</span> <span class="hl kwd">ggtitle</span><span class="hl std">(</span><span class="hl str">&quot;Life Expectancy vs. GDP per Capita&quot;</span><span class="hl std">)</span>
<span class="hl kwd">ggsave</span><span class="hl std">(</span><span class="hl kwc">filename</span> <span class="hl std">=</span> <span class="hl str">&quot;inform_lifeExpectancyVsGdpPerCap_all_loessSmooth.png&quot;</span><span class="hl std">,</span> <span class="hl kwc">plot</span> <span class="hl std">= q1,</span> <span class="hl kwc">path</span> <span class="hl std">=</span> <span class="hl str">&quot;Figures&quot;</span><span class="hl std">,</span>
    <span class="hl kwc">width</span> <span class="hl std">=</span> <span class="hl num">14.4</span><span class="hl std">,</span> <span class="hl kwc">height</span> <span class="hl std">=</span> <span class="hl num">10.9</span><span class="hl std">)</span>
<span class="hl com"># Another informative plot</span>
<span class="hl std">sCountry</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;United States&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Canada&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Mexico&quot;</span><span class="hl std">)</span>  <span class="hl com"># North America</span>
<span class="hl std">q2</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ggplot</span><span class="hl std">(</span><span class="hl kwc">data</span> <span class="hl std">=</span> <span class="hl kwd">within</span><span class="hl std">(</span><span class="hl kwd">subset</span><span class="hl std">(gDat, country</span> <span class="hl opt">%in%</span> <span class="hl std">sCountry), country</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">reorder</span><span class="hl std">(country,</span>
    <span class="hl std">lifeExp)),</span> <span class="hl kwd">aes</span><span class="hl std">(</span><span class="hl kwc">x</span> <span class="hl std">= country,</span> <span class="hl kwc">y</span> <span class="hl std">= lifeExp))</span> <span class="hl opt">+</span> <span class="hl kwd">geom_boxplot</span><span class="hl std">()</span> <span class="hl opt">+</span> <span class="hl kwd">geom_jitter</span><span class="hl std">()</span> <span class="hl opt">+</span> <span class="hl kwd">ggtitle</span><span class="hl std">(</span><span class="hl str">&quot;Life Expectancy measures of spread for select countries&quot;</span><span class="hl std">)</span>
<span class="hl kwd">ggsave</span><span class="hl std">(</span><span class="hl kwc">filename</span> <span class="hl std">=</span> <span class="hl str">&quot;inform_lifeExpectancy_measuresOfSpread.png&quot;</span><span class="hl std">,</span> <span class="hl kwc">plot</span> <span class="hl std">= q2,</span> <span class="hl kwc">path</span> <span class="hl std">=</span> <span class="hl str">&quot;Figures&quot;</span><span class="hl std">,</span>
    <span class="hl kwc">width</span> <span class="hl std">=</span> <span class="hl num">14.4</span><span class="hl std">,</span> <span class="hl kwc">height</span> <span class="hl std">=</span> <span class="hl num">10.9</span><span class="hl std">)</span>
<span class="hl com"># Informative plot: look at a particular year per continent</span>
<span class="hl std">sYear</span> <span class="hl kwb">&lt;-</span> <span class="hl num">2002</span>
<span class="hl std">q3</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ggplot</span><span class="hl std">(</span><span class="hl kwd">subset</span><span class="hl std">(gDat, year</span> <span class="hl opt">==</span> <span class="hl std">sYear),</span> <span class="hl kwd">aes</span><span class="hl std">(</span><span class="hl kwc">x</span> <span class="hl std">= gdpPercap,</span> <span class="hl kwc">y</span> <span class="hl std">= lifeExp))</span> <span class="hl opt">+</span> <span class="hl kwd">scale_x_log10</span><span class="hl std">()</span>
<span class="hl std">q3</span> <span class="hl kwb">&lt;-</span> <span class="hl std">q3</span> <span class="hl opt">+</span> <span class="hl kwd">geom_point</span><span class="hl std">(</span><span class="hl kwd">aes</span><span class="hl std">(</span><span class="hl kwc">size</span> <span class="hl std">=</span> <span class="hl kwd">sqrt</span><span class="hl std">(pop</span><span class="hl opt">/</span><span class="hl std">pi),</span> <span class="hl kwc">fill</span> <span class="hl std">= continent),</span> <span class="hl kwc">pch</span> <span class="hl std">=</span> <span class="hl num">21</span><span class="hl std">,</span> <span class="hl kwc">show_guide</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span> <span class="hl opt">+</span>
    <span class="hl kwd">scale_size_continuous</span><span class="hl std">(</span><span class="hl kwc">range</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">40</span><span class="hl std">))</span> <span class="hl opt">+</span> <span class="hl kwd">facet_wrap</span><span class="hl std">(</span><span class="hl opt">~</span><span class="hl std">continent)</span> <span class="hl opt">+</span> <span class="hl kwd">ggtitle</span><span class="hl std">(</span><span class="hl kwd">paste</span><span class="hl std">(</span><span class="hl str">&quot;Life Expectancy vs. GDP per Capita in &quot;</span><span class="hl std">,</span>
    <span class="hl std">sYear,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">))</span>
<span class="hl kwd">ggsave</span><span class="hl std">(</span><span class="hl kwc">filename</span> <span class="hl std">=</span> <span class="hl kwd">paste</span><span class="hl std">(</span><span class="hl str">&quot;inform_lifeExpectancyVsGdpPerCap_&quot;</span><span class="hl std">, sYear,</span> <span class="hl str">&quot;.png&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">),</span> <span class="hl kwc">plot</span> <span class="hl std">= q3,</span>
    <span class="hl kwc">path</span> <span class="hl std">=</span> <span class="hl str">&quot;Figures&quot;</span><span class="hl std">,</span> <span class="hl kwc">width</span> <span class="hl std">=</span> <span class="hl num">14.4</span><span class="hl std">,</span> <span class="hl kwc">height</span> <span class="hl std">=</span> <span class="hl num">10.9</span><span class="hl std">)</span>
<span class="hl com"># Reorder the continents based on life expectancy, and clean data to remove Oceania</span>
<span class="hl std">cleanData</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">droplevels</span><span class="hl std">(</span><span class="hl kwd">subset</span><span class="hl std">(gDat, continent</span> <span class="hl opt">!=</span> <span class="hl str">&quot;Oceania&quot;</span><span class="hl std">))</span>
<span class="hl kwd">table</span><span class="hl std">(cleanData</span><span class="hl opt">$</span><span class="hl std">continent)</span>  <span class="hl com">#ensure that the factor has been dropped</span>
</pre></div>
<div class="output"><pre class="knitr r">## 
##   Africa Americas     Asia   Europe 
##      624      300      396      360
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">cleanData</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">within</span><span class="hl std">(cleanData, continent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">reorder</span><span class="hl std">(continent, lifeExp))</span>
<span class="hl kwd">table</span><span class="hl std">(cleanData</span><span class="hl opt">$</span><span class="hl std">continent)</span>  <span class="hl com">#ensure that the factor has been reordered on lifeExp</span>
</pre></div>
<div class="output"><pre class="knitr r">## 
##   Africa     Asia Americas   Europe 
##      624      396      300      360
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># rearrange actual data</span>
<span class="hl std">cleanData</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">arrange</span><span class="hl std">(cleanData, continent)</span>
<span class="hl kwd">write.table</span><span class="hl std">(cleanData,</span> <span class="hl str">&quot;Data/gapminder_clean.tsv&quot;</span><span class="hl std">,</span> <span class="hl kwc">quote</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;\t&quot;</span><span class="hl std">,</span> <span class="hl kwc">row.names</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
<span class="hl kwd">sessionInfo</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## R version 3.0.1 (2013-05-16)
## Platform: x86_64-apple-darwin10.8.0 (64-bit)
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] methods   stats     graphics  grDevices utils     datasets  base     
## 
## other attached packages:
## [1] plyr_1.8        ggplot2_0.9.3.1
## 
## loaded via a namespace (and not attached):
##  [1] colorspace_1.2-2   dichromat_2.0-0    digest_0.6.3       evaluate_0.4.7    
##  [5] formatR_0.9        grid_3.0.1         gtable_0.1.2       highr_0.2.1       
##  [9] knitr_1.4.1        labeling_0.2       MASS_7.3-26        munsell_0.4.2     
## [13] proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2     scales_0.2.3      
## [17] stringr_0.6.2      tools_3.0.1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">Sys.time</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "2013-10-20 00:10:25 PDT"
</pre></div>
</div></div>


  <p>The R session information (including the OS info, R version and all
    packages used):</p>

<div class="chunk" id="session-info"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">sessionInfo</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## R version 3.0.1 (2013-05-16)
## Platform: x86_64-apple-darwin10.8.0 (64-bit)
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] methods   stats     graphics  grDevices utils     datasets  base     
## 
## other attached packages:
## [1] plyr_1.8        ggplot2_0.9.3.1
## 
## loaded via a namespace (and not attached):
##  [1] colorspace_1.2-2   dichromat_2.0-0    digest_0.6.3       evaluate_0.4.7    
##  [5] formatR_0.9        grid_3.0.1         gtable_0.1.2       highr_0.2.1       
##  [9] knitr_1.4.1        labeling_0.2       MASS_7.3-26        munsell_0.4.2     
## [13] proto_0.3-10       RColorBrewer_1.0-5 reshape2_1.2.2     scales_0.2.3      
## [17] stringr_0.6.2      tools_3.0.1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">Sys.time</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "2013-10-20 00:10:25 PDT"
</pre></div>
</div></div>




</body>
</html>
